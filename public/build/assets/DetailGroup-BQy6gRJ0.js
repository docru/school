import{_ as D,m as y,a as V,v as e}from"./app-76lNZU7W.js";import{C as b,S}from"./CourseSchedule-DUu-C_ip.js";const N={name:"DetailGroup",components:{CourseSchedule:b,StudyProgram:S},data(){return{tab:"lessons"}},computed:{...y("profile",["getProfile"]),...y("disciple",{group:"getGroup",courseSchoolDays:"getCourseSchoolDay",groupSchoolDays:"getGroupSchoolDay",getDisciples:"getDisciples",getTeachers:"getTeachers",attendances:"getAttendances"}),headers(){return[{title:"",align:"left",key:"order",width:"130px",fixed:!0,sortable:!1,divider:!0},{title:"Уроки",align:"left",key:"lessons",fixed:!0,sortable:!1,divider:!0},{title:"Посещение",align:"center",key:"attendance",width:"50px",fixed:!0,sortable:!1,divider:!0}]},teachers(){let t=[];for(const r in this.getTeachers)t.push({title:this.getTeachers[r].name??"-"});return t},disciples(){let t=[];for(const r in this.getDisciples)t.push({title:this.getDisciples[r].name??"-"});return t}},methods:{...V("disciple",["actRequestGroup"]),lessons(t){if(t){let r=[];for(const s in t)r.push(1+parseInt(s)+". "+t[s].name);return r.join("; ")}else return""},groupSchoolDay(t,r){var s,p;return(p=(s=this.groupSchoolDays)==null?void 0:s[t])==null?void 0:p[r]},attendance(t){let r=this.groupSchoolDays[t];return Object.values(this.attendances).indexOf(r.id)>-1}},created(){this.actRequestGroup(this.$route.params.id)}},E={class:"tw-flex tw-justify-between"},T={class:"tw-text-[12px]"},G={class:"tw-flex tw-justify-between"},F={key:0,class:"tw-text-[12px]"},j={key:1,class:"tw-text-[12px]"},I=["onClick"],L={key:1,class:"tw-text-[grey]"},P=e.createElementVNode("h3",null,"Учителя",-1),q={key:1},A=e.createElementVNode("h3",null,"Ученики",-1),O={key:3};function R(t,r,s,p,i,l){const u=e.resolveComponent("v-tab"),_=e.resolveComponent("v-tabs"),g=e.resolveComponent("v-card-title"),v=e.resolveComponent("v-divider"),f=e.resolveComponent("router-link"),m=e.resolveComponent("v-chip"),w=e.resolveComponent("v-data-table"),h=e.resolveComponent("v-window-item"),k=e.resolveComponent("v-list"),B=e.resolveComponent("v-window"),x=e.resolveComponent("v-card-text"),C=e.resolveComponent("v-card");return e.openBlock(),e.createBlock(C,null,{default:e.withCtx(()=>[e.createVNode(g,null,{default:e.withCtx(()=>{var o,a,n,c;return[e.createElementVNode("div",E,[e.createElementVNode("div",null,'Группа "'+e.toDisplayString((a=(o=t.group)==null?void 0:o.group)==null?void 0:a.name)+'". Курс "'+e.toDisplayString((c=(n=t.group)==null?void 0:n.course)==null?void 0:c.name)+'"',1)]),e.createVNode(_,{modelValue:i.tab,"onUpdate:modelValue":r[0]||(r[0]=d=>i.tab=d),"bg-color":""},{default:e.withCtx(()=>[e.createVNode(u,{value:"lessons"},{default:e.withCtx(()=>[e.createTextVNode("Уроки")]),_:1}),t.getProfile.roles.includes("disciple")?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(u,{key:0,value:"group"},{default:e.withCtx(()=>[e.createTextVNode("Группа")]),_:1}))]),_:1},8,["modelValue"])]}),_:1}),e.createVNode(v),e.createVNode(x,null,{default:e.withCtx(()=>[e.createVNode(B,{modelValue:i.tab,"onUpdate:modelValue":r[1]||(r[1]=o=>i.tab=o)},{default:e.withCtx(()=>[e.createVNode(h,{value:"lessons"},{default:e.withCtx(()=>[e.createVNode(w,{mobile:!0,"fixed-header":"",density:"compact",items:t.courseSchoolDays,"items-per-page":"100",headers:l.headers,"hide-default-footer":!0,"disable-pagination":""},e.createSlots({bottom:e.withCtx(()=>[]),"item.order":e.withCtx(({item:o})=>[e.createElementVNode("span",T,e.toDisplayString(o.order)+". "+e.toDisplayString(l.groupSchoolDay(o.id,"date")??"-"),1)]),"item.lessons":e.withCtx(({item:o})=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.lessons??[],(a,n)=>(e.openBlock(),e.createElementBlock("div",{class:"tw-my-1",key:a.id},[l.groupSchoolDay(o.id,"status")==="close"?(e.openBlock(),e.createElementBlock("span",{key:0,class:"tw-text-[lightskyblue]",style:{"border-bottom":"1px dashed lightskyblue",cursor:"pointer"},onClick:c=>t.$router.push({name:"DiscipleLesson",params:{groupId:t.group.group.id,lessonId:a.id}})},e.toDisplayString(n+1)+". "+e.toDisplayString(a.name),9,I)):(e.openBlock(),e.createElementBlock("span",L,e.toDisplayString(n+1)+". "+e.toDisplayString(a.name),1))]))),128))]),"item.attendance":e.withCtx(({item:o})=>[l.groupSchoolDay(o.id,"date")?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[l.attendance(o.id)?(e.openBlock(),e.createBlock(m,{key:0,color:"secondary",density:"compact"},{default:e.withCtx(()=>[e.createTextVNode(" Присутств. ")]),_:1})):(e.openBlock(),e.createBlock(m,{key:1,color:"red",density:"compact"},{default:e.withCtx(()=>[e.createTextVNode(" Отсутств. ")]),_:1}))],64)):e.createCommentVNode("",!0)]),_:2},[t.$vuetify.display.name==="sm"?{name:"headers",fn:e.withCtx(()=>[]),key:"0"}:void 0,t.$vuetify.display.name==="sm"?{name:"item",fn:e.withCtx(({item:o,columns:a})=>[t.$vuetify.display.name==="sm"?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["tw-border tw-rounded tw-border-[rgba(221,218,218,0.49)] tw-mt-2 tw-p-2",{}])},[e.createElementVNode("div",G,[e.createTextVNode(e.toDisplayString(o.order)+". "+e.toDisplayString(l.groupSchoolDay(o.id,"date")??"-")+" ",1),l.groupSchoolDay(o.id,"date")?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[l.attendance(o.id)?(e.openBlock(),e.createElementBlock("span",F," Присутств. ")):(e.openBlock(),e.createElementBlock("span",j," Отсутств. "))],64)):e.createCommentVNode("",!0)]),e.createTextVNode(" Уроки: "),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.lessons,n=>{var c,d;return e.openBlock(),e.createElementBlock("div",{key:n.id,style:{color:"lightskyblue",margin:"5px 0"}},[l.groupSchoolDay(o.id,"status")==="close"?(e.openBlock(),e.createBlock(f,{key:0,style:{"border-bottom":"1px dashed lightskyblue"},to:{path:`/disciple/lesson/${(d=(c=t.group)==null?void 0:c.group)==null?void 0:d.id}/${n.id}`}},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.name),1)]),_:2},1032,["to"])):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(n.name),1)],64))])}),128))],2)):e.createCommentVNode("",!0)]),key:"1"}:void 0]),1032,["items","headers"])]),_:1}),e.createVNode(h,{value:"group"},{default:e.withCtx(()=>[P,l.teachers.length?(e.openBlock(),e.createBlock(k,{key:0,items:l.teachers,density:"compact"},null,8,["items"])):(e.openBlock(),e.createElementBlock("div",q,"Нет учителей")),A,l.disciples.length?(e.openBlock(),e.createBlock(k,{key:2,items:l.disciples,density:"compact"},null,8,["items"])):(e.openBlock(),e.createElementBlock("div",O,"Нет учеников"))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}const H=D(N,[["render",R]]);export{H as default};
