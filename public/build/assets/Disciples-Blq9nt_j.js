import{_ as k,a as w,m as f,v as e}from"./app-D83wlC67.js";import{I as g,L as x,C as V}from"./ICode-rrbXcgbd.js";import{I as y,a as N,b as B}from"./IMore-DC-Nu93q.js";const I={name:"Disciples",components:{IMore:y,IModeration:N,IVast:B,ICode:g,Loading:x,Code:V},data(){return{search:"",dialog:!1,surname:"",name:"",patronymic:"",phone:"",usersHeaders:[{title:"id",key:"id"},{title:"Вход",key:"entrance"},{title:"ФИО",key:"surname"},{title:"Телефон",key:"phone"},{title:"link",sortable:!1,key:"link"},{title:"",align:"end",sortable:!1,key:"actions"}]}},methods:{...w("users",["actReqwestUsers","actUserCreateLink"]),editItem(o){alert("Редактирование пользователя. Пока не сделано ((")},deleteItem(o){alert("Удаление пользователя. Пока не сделано ((")}},computed:{searchItems(){return this.search?this.getUsers.filter(o=>{var s,r;return((s=o.phone)==null?void 0:s.search(this.search))>-1||((r=o.surname)==null?void 0:r.search(this.search))>-1}):this.getUsers},...f("users",["getUsers","getLoad"])},created(){this.actReqwestUsers({role:"disciple"})}},U={key:0},b={class:"tw-flex tw-flex-col md:tw-flex-row tw-justify-between"},D={class:"tw-w-full md:tw-w-1/3"},E={style:{float:"right"}},L=e.createElementVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.59964 3.45737C3.80628 0.250428 8.08538 -0.94687 11.6901 0.811276C15.6603 2.74768 17.3091 7.53595 15.3727 11.5062C13.4363 15.4764 8.64798 17.1251 4.67776 15.1887C3.08138 14.4101 1.81733 13.1467 1.03718 11.5918C0.839085 11.197 0.998557 10.7163 1.39337 10.5182C1.78819 10.3201 2.26884 10.4796 2.46694 10.8744C3.09113 12.1184 4.10063 13.1275 5.379 13.751C8.55518 15.3001 12.3858 13.9811 13.9349 10.8049C15.484 7.62876 14.1651 3.79815 10.9889 2.24902C7.94449 0.764172 4.29884 1.91436 2.63736 4.80937H3.99909C4.44082 4.80937 4.79891 5.16746 4.79891 5.60918C4.79891 6.05091 4.44082 6.409 3.99909 6.409H0.799819C0.358091 6.409 0 6.05091 0 5.60918V2.40991C0 1.96818 0.358091 1.61009 0.799819 1.61009C1.24155 1.61009 1.59964 1.96818 1.59964 2.40991V3.45737Z",fill:"#B0BACD"},null,-1),M=[L],z=["onClick"];function T(o,s,r,q,n,l){const c=e.resolveComponent("v-card-title"),d=e.resolveComponent("v-text-field"),a=e.resolveComponent("v-icon"),m=e.resolveComponent("v-skeleton-loader"),p=e.resolveComponent("Code"),_=e.resolveComponent("v-chip"),C=e.resolveComponent("v-data-table"),h=e.resolveComponent("v-card-text"),u=e.resolveComponent("v-card"),v=e.resolveComponent("Loading");return o.getUsers?(e.openBlock(),e.createBlock(u,{key:0},{default:e.withCtx(()=>[e.createVNode(c,null,{default:e.withCtx(()=>[e.createTextVNode(" Ученики ")]),_:1}),e.createVNode(h,null,{default:e.withCtx(()=>[o.getUsers?(e.openBlock(),e.createElementBlock("div",U,[e.createElementVNode("div",b,[e.createElementVNode("div",D,[e.createVNode(d,{clearable:"","persistent-clear":"",label:"Поиск по фамилии/телефону",modelValue:n.search,"onUpdate:modelValue":s[0]||(s[0]=t=>n.search=t)},null,8,["modelValue"])])]),e.createVNode(C,{"onClick:row":s[2]||(s[2]=t=>n.dialog=!n.dialog),headers:n.usersHeaders,items:l.searchItems,loading:o.getLoad},{"item.actions":e.withCtx(({item:t})=>[e.createVNode(a,{class:"me-2",size:"small",onClick:e.withModifiers(i=>l.editItem(t),["stop"])},{default:e.withCtx(()=>[e.createTextVNode(" mdi-pencil ")]),_:2},1032,["onClick"]),e.createVNode(a,{size:"small",onClick:e.withModifiers(i=>l.deleteItem(t),["stop"])},{default:e.withCtx(()=>[e.createTextVNode(" mdi-delete ")]),_:2},1032,["onClick"])]),"header.actions":e.withCtx(()=>[e.createElementVNode("div",E,[(e.openBlock(),e.createElementBlock("svg",{class:"tw-cursor-pointer",onClick:s[1]||(s[1]=e.withModifiers((...t)=>o.actRequestDisciples&&o.actRequestDisciples(...t),["stop"])),width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},M))])]),loading:e.withCtx(()=>[e.createVNode(m,{type:"table-row@10"})]),"item.surname":e.withCtx(({item:t})=>[e.createTextVNode(e.toDisplayString(t.surname)+" "+e.toDisplayString(t.name)+" "+e.toDisplayString(t.patronymic),1)]),"item.link":e.withCtx(({item:t})=>[t.entry_code?(e.openBlock(),e.createBlock(p,{key:0,code:t.entry_code},null,8,["code"])):(e.openBlock(),e.createElementBlock("div",{key:1,onClick:i=>o.actUserCreateLink({uid:t.id})}," сгенерить ключ",8,z))]),"item.entrance":e.withCtx(({item:t})=>[e.createVNode(_,{color:t.authorized_at?"green":"grey"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.authorized_at?t.authorized_at:"не заходил"),1)]),_:2},1032,["color"])]),_:1},8,["headers","items","loading"])])):e.createCommentVNode("",!0)]),_:1})]),_:1})):(e.openBlock(),e.createBlock(v,{key:1}))}const A=k(I,[["render",T]]);export{A as default};
