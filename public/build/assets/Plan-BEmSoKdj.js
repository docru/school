import{e as k,u as b,f as w,v as a,V as q,p as N,h as D,i as _,j as F,k as j,l as A,n as R,o as U,q as z,_ as L}from"./app-BZSU0PIB.js";const Y=N({allDay:Boolean,interval:Object,intervalDivisions:{type:Number,required:!0},intervalDuration:{type:Number,required:!0},intervalHeight:{type:Number,required:!0},event:Object},"VCalendarIntervalEvent"),P=k()({name:"VCalendarIntervalEvent",props:Y(),setup(e){const o=b(),d=()=>{var n,t,i,l;if(!((n=e.event)!=null&&n.first)&&!((t=e.event)!=null&&t.last)||o.isEqual((i=e.event)==null?void 0:i.start,(l=e.interval)==null?void 0:l.start))return{height:"100%",margin:D(0)};{const{height:s,margin:r}=Array.from({length:e.intervalDivisions},v=>v*(e.intervalDuration/e.intervalDivisions)).reduce((v,y,m)=>{var h,f;return o.isBefore(o.addMinutes((h=e.interval)==null?void 0:h.start,y),(f=e.event)==null?void 0:f.start)?{height:D(e.intervalHeight/e.intervalDivisions*m),margin:D(e.intervalHeight/e.intervalDivisions*m)}:{height:v.height,margin:v.margin}},{height:"",margin:""});return{height:s,margin:r}}};return w(()=>{var n,t,i,l,s;return a.createVNode(q,{height:d().height,density:"comfortable",style:`margin-top: ${d().margin}`,class:"v-calendar-internal-event",color:((n=e.event)==null?void 0:n.color)??void 0,rounded:(t=e.event)!=null&&t.first&&((i=e.event)!=null&&i.last)?!0:(l=e.event)!=null&&l.first?"t":(s=e.event)!=null&&s.last?"b":!1},{default:()=>{var r,v;return[(r=e.event)!=null&&r.first?(v=e.event)==null?void 0:v.title:""]}})}),{}}}),W=N({day:{type:Object,default:()=>({})},dayIndex:Number,events:Array,intervalDivisions:{type:Number,default:2},intervalDuration:{type:Number,default:60},intervalHeight:{type:Number,default:48},intervalFormat:{type:[String,Function],default:"fullTime12h"},intervalStart:{type:Number,default:0}},"VCalendarInterval"),E=k()({name:"VCalendarInterval",props:{index:{type:Number,required:!0},...W()},setup(e,o){const d=b(),n=a.computed(()=>{const t=d.addMinutes(d.startOfDay(e.day.date),e.intervalDuration*(e.index+e.intervalStart)),i=d.addMinutes(d.startOfDay(e.day.date),e.intervalDuration*(e.index+e.intervalStart+1)-1);return{...e.day,label:d.format(t,"fullTime24h"),start:t,end:i,events:e.events?e.events.filter(l=>!l.allDay&&(d.isEqual(t,l.start)||d.isWithinRange(l.start,[t,i])||d.isWithinRange(t,[l.start,l.end])||d.isEqual(i,l.end))).map(l=>({...l,first:d.isEqual(t,l.start)||d.isWithinRange(l.start,[t,i]),last:d.isEqual(i,l.end)||d.isWithinRange(l.end,[t,i])})):[]}});return w(()=>{var t,i;return e.dayIndex===0?a.createVNode("div",{class:"v-calendar-day__row-with-label",style:`height: ${D(e.intervalHeight)}`},[a.createVNode("div",{class:"v-calendar-day__row-label"},[a.createVNode("slot",{name:"intervalFormat",interval:n.value},[e.index?e.intervalFormat?typeof e.intervalFormat=="string"?d.format(n.value.start,"hours12h"):e.intervalFormat(n.value):n.value.label:""])]),a.createVNode("div",{class:"v-calendar-day__row-hairline"},null),a.createVNode("div",{class:["v-calendar-day__row-content",n.value.events.some(l=>!l.last)?"v-calendar-day__row-content-through":""]},[a.createVNode("slot",{name:"intervalBody",interval:n.value},[(t=n.value.events)==null?void 0:t.map(l=>a.createVNode(P,{event:l,interval:n.value,intervalDivisions:e.intervalDivisions,intervalDuration:e.intervalDuration,intervalHeight:e.intervalHeight},null))])])]):a.createVNode("div",{class:"v-calendar-day__row-without-label",style:`height: ${D(e.intervalHeight)}`},[a.createVNode("div",{class:["v-calendar-day__row-content",n.value.events.some(l=>!l.last)?"v-calendar-day__row-content-through":""]},[a.createVNode("slot",{name:"intervalBody",interval:n.value},[(i=n.value.events)==null?void 0:i.filter(l=>!l.allDay).map(l=>a.createVNode(P,{event:l,interval:n.value,intervalDivisions:e.intervalDivisions,intervalDuration:e.intervalDuration,intervalHeight:e.intervalHeight},null))])])])}),{interval:n}}}),$=N({hideDayHeader:Boolean,intervals:{type:Number,default:24},...W()},"VCalendarDay"),M=k()({name:"VCalendarDay",props:$(),setup(e){const o=b(),d=a.computed(()=>[...Array.from({length:e.intervals},(n,t)=>t).filter((n,t)=>e.intervalDuration*(t+e.intervalStart)<1440)]);return w(()=>{const n=E.filterProps(e);return a.createVNode("div",{class:"v-calendar-day__container"},[!e.hideDayHeader&&a.createVNode("div",{key:"calender-week-name",class:"v-calendar-weekly__head-weekday"},[o.format(e.day.date,"weekdayShort"),a.createVNode("div",null,[a.createVNode(_,{icon:!0,text:o.format(e.day.date,"dayOfMonth"),variant:"text"},null)])]),d.value.map((t,i)=>a.createVNode(E,a.mergeProps({index:i},n),null))])}),{intervals:d}}}),B=N({nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},title:String,text:{type:String,default:"$vuetify.calendar.today"},viewMode:{type:String,default:"month"}},"VCalendarHeader"),I=k()({name:"VCalendarHeader",props:B(),emits:{"click:next":()=>!0,"click:prev":()=>!0,"click:toToday":()=>!0},setup(e,o){let{emit:d}=o;const{t:n}=F();function t(){d("click:prev")}function i(){d("click:next")}function l(){d("click:toToday")}return w(()=>a.createVNode("div",{class:"v-calendar-header"},[e.text&&a.createVNode(_,{key:"today",class:"v-calendar-header__today",text:n(e.text),variant:"outlined",onClick:l},null),a.createVNode(_,{density:"comfortable",icon:e.prevIcon,variant:"text",onClick:t},null),a.createVNode(_,{density:"comfortable",icon:e.nextIcon,variant:"text",onClick:i},null),a.createVNode("div",{class:"v-calendar-header__title"},[e.title])])),{}}}),G=N({allDay:Boolean,day:Object,event:Object},"VCalendarEvent"),T=k()({name:"VCalendarEvent",props:G(),setup(e){return w(()=>a.createVNode(j,{color:e.allDay?"primary":void 0,density:"comfortable",label:e.allDay,width:"100%"},{default:()=>{var o,d;return[a.createVNode(A,{inline:!0,dot:!0,color:(o=e.event)==null?void 0:o.color},null),(d=e.event)==null?void 0:d.title]}})),{}}}),J=N({active:Boolean,color:String,day:Object,disabled:Boolean,events:Array,title:[Number,String]},"VCalendarMonthDay"),K=k()({name:"VCalendarMonthDay",props:J(),setup(e,o){let{emit:d,slots:n}=o;return w(()=>{var i,l,s,r,v,y,m,h,f;const t=!!(e.title||(i=n.title)!=null&&i.call(n,{title:e.title}));return a.createVNode("div",{class:["v-calendar-month__day"]},[!((l=e.day)!=null&&l.isHidden)&&t&&a.createVNode("div",{key:"title",class:"v-calendar-weekly__day-label"},[((s=n.title)==null?void 0:s.call(n,{title:e.title}))??a.createVNode(_,{class:(r=e.day)!=null&&r.isToday?"v-calendar-weekly__day-label__today":void 0,color:e.color,disabled:e.disabled,icon:!0,size:"x-small",variant:(v=e.day)!=null&&v.isToday?void 0:"flat"},{default:()=>[e.title]})]),a.createVNode("div",{key:"content",class:"v-calendar-weekly__day-content"},[((y=n.content)==null?void 0:y.call(n))??a.createVNode("div",null,[a.createVNode("div",{class:"v-calendar-weekly__day-alldayevents-container"},[(m=e.events)==null?void 0:m.filter(c=>c.allDay).map(c=>a.createVNode(T,{day:e.day,event:c,allDay:!0},null))]),a.createVNode("div",{class:"v-calendar-weekly__day-events-container"},[(h=e.events)==null?void 0:h.filter(c=>!c.allDay).map(c=>a.createVNode(T,{day:e.day,event:c},null))])])]),(f=n.default)==null?void 0:f.call(n)])}),{}}}),Q=N({hideHeader:Boolean,hideWeekNumber:Boolean,...R(),...$(),...B()},"VCalender"),X=k()({name:"VCalendar",props:Q(),emits:{next:null,prev:null,"update:modelValue":null},setup(e,o){let{emit:d,slots:n}=o;const t=b(),{daysInMonth:i,daysInWeek:l,genDays:s,model:r,weekNumbers:v}=U(e),y=t.getWeekdays();function m(){e.viewMode==="month"&&(r.value=[t.addMonths(r.value[0],1)]),e.viewMode==="week"&&(r.value=[t.addDays(r.value[0],7)]),e.viewMode==="day"&&(r.value=[t.addDays(r.value[0],1)])}function h(){e.viewMode==="month"&&(r.value=[t.addMonths(r.value[0],-1)]),e.viewMode==="week"&&(r.value=[t.addDays(r.value[0],-7)]),e.viewMode==="day"&&(r.value=[t.addDays(r.value[0],-1)])}function f(){r.value=[new Date]}const c=a.computed(()=>t.format(r.value[0],"monthAndYear"));return w(()=>{var H;const S=M.filterProps(e),O=I.filterProps(e);return a.createVNode("div",{class:["v-calendar",{"v-calendar-monthly":e.viewMode==="month","v-calendar-weekly":e.viewMode==="week","v-calendar-day":e.viewMode==="day"}]},[a.createVNode("div",null,[!e.hideHeader&&(n.header?n.header({title:c.value}):a.createVNode(I,a.mergeProps({key:"calendar-header"},O,{title:c.value,"onClick:next":m,"onClick:prev":h,"onClick:toToday":f}),null))]),a.createVNode("div",{class:["v-calendar__container",`days__${e.weekdays.length}`]},[e.viewMode==="month"&&!e.hideDayHeader&&a.createVNode("div",{class:["v-calendar-weekly__head",`days__${e.weekdays.length}`,...e.hideWeekNumber?[]:["v-calendar-weekly__head-weeknumbers"]],key:"calenderWeeklyHead"},[e.hideWeekNumber?"":a.createVNode("div",{key:"weekNumber0",class:"v-calendar-weekly__head-weeknumber"},null),e.weekdays.map(u=>a.createVNode("div",{class:`v-calendar-weekly__head-weekday${e.hideWeekNumber?"":"-with-weeknumber"}`},[y[u]]))]),e.viewMode==="month"&&a.createVNode("div",{key:"VCalendarMonth",class:["v-calendar-month__days",`days${e.hideWeekNumber?"":"-with-weeknumbers"}__${e.weekdays.length}`,...e.hideWeekNumber?[]:["v-calendar-month__weeknumbers"]]},[z(i.value,e.weekdays.length).map((u,C)=>[e.hideWeekNumber?"":a.createVNode("div",{class:"v-calendar-month__weeknumber"},[v.value[C]]),u.map(V=>{var g;return a.createVNode(K,{color:t.isSameDay(new Date,V.date)?"primary":void 0,day:V,title:V?t.format(V.date,"dayOfMonth"):"NaN",events:(g=e.events)==null?void 0:g.filter(x=>t.isSameDay(V.date,x.start)||t.isSameDay(V.date,x.end))},null)})])]),e.viewMode==="week"&&l.value.map((u,C)=>{var V;return a.createVNode(M,a.mergeProps(S,{day:u,dayIndex:C,events:(V=e.events)==null?void 0:V.filter(g=>t.isSameDay(g.start,u.date)||t.isSameDay(g.end,u.date))}),null)}),e.viewMode==="day"&&a.createVNode(M,a.mergeProps(S,{day:s([r.value[0]],t.date())[0],events:(H=e.events)==null?void 0:H.filter(u=>t.isSameDay(u.start,s([r.value[0]],t.date())[0].date)||t.isSameDay(u.end,s([r.value[0]],t.date())[0].date))}),null)])])}),{daysInMonth:i,daysInWeek:l,genDays:s}}}),Z={components:{VCalendar:X},data:()=>({type:"month",types:["month","week","day"],weekday:[0,1,2,3,4,5,6],weekdays:[{title:"Sun - Sat",value:[0,1,2,3,4,5,6]},{title:"Mon - Sun",value:[1,2,3,4,5,6,0]},{title:"Mon - Fri",value:[1,2,3,4,5]},{title:"Mon, Wed, Fri",value:[1,3,5]}],value:[new Date],events:[],colors:["blue","indigo","deep-purple","cyan","green","orange","grey darken-1"],titles:["Группа 123 - Библейский курс - урок 5 - 19.00","Группа 1 - Предпенуэл - урок 2 - 15.00"]}),mounted(){const e=b();this.getEvents({start:e.startOfDay(e.startOfMonth(new Date)),end:e.endOfDay(e.endOfMonth(new Date))})},methods:{getEvents({start:e,end:o}){const d=[],n=e,t=o,i=(t.getTime()-n.getTime())/864e5,l=this.rnd(i,i+5);for(let s=0;s<l;s++){const r=this.rnd(0,3)===0,v=this.rnd(n.getTime(),t.getTime()),y=new Date(v-v%9e5),m=this.rnd(2,r?288:8)*9e5,h=new Date(y.getTime()+m);d.push({title:this.titles[this.rnd(0,this.titles.length-1)],start:y,end:h,color:this.colors[this.rnd(0,this.colors.length-1)],allDay:!r})}this.events=d},getEventColor(e){return e.color},rnd(e,o){return Math.floor((o-e+1)*Math.random())+e}}};function p(e,o,d,n,t,i){const l=a.resolveComponent("v-select"),s=a.resolveComponent("v-sheet"),r=a.resolveComponent("v-calendar");return a.openBlock(),a.createElementBlock("div",null,[a.createVNode(s,{class:"d-flex",height:"54",tile:""},{default:a.withCtx(()=>[a.createVNode(l,{modelValue:e.type,"onUpdate:modelValue":o[0]||(o[0]=v=>e.type=v),items:e.types,class:"ma-2",label:"View Mode",variant:"outlined",dense:"","hide-details":""},null,8,["modelValue","items"]),a.createVNode(l,{modelValue:e.weekday,"onUpdate:modelValue":o[1]||(o[1]=v=>e.weekday=v),items:e.weekdays,class:"ma-2",label:"weekdays",variant:"outlined",dense:"","hide-details":""},null,8,["modelValue","items"])]),_:1}),a.createVNode(s,null,{default:a.withCtx(()=>[a.createVNode(r,{class:"tw-w-1/2",ref:"calendar",modelValue:e.value,"onUpdate:modelValue":o[2]||(o[2]=v=>e.value=v),events:e.events,"view-mode":e.type,weekdays:e.weekday},null,8,["modelValue","events","view-mode","weekdays"])]),_:1})])}const ae=L(Z,[["render",p]]);export{ae as default};
