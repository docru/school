import{_ as h,m as V,b as w,a as g,v as e}from"./app-jpzxprKj.js";const x={name:"CoursesList",data(){return{nameGroup:"",course:null,headers:[{title:"id",key:"id"},{title:"",key:"status"},{title:"Название",key:"name"},{title:"Курс",key:"course"},{title:"",align:"end",sortable:!1,key:"actions"}],filterItems:[{val:"open",title:"Активные"},{val:"archived",title:"Архивные"},{val:"all",title:"Все"}],filterItemSelected:"open",dialog:!1}},computed:{...V("administrator",{getGroups:"getGroups",courses:"getCourses",load:"getLoad"}),groups(){return this.getGroups.filter(s=>this.filterItemSelected==="all"||s.status===this.filterItemSelected)}},methods:{go(s,o){this.$router.push({name:"AdministratorDetailGroup",params:{id:o.item.id}})},...w("app",["setSnackBar"]),...g("administrator",["actRequestGroups","actCreateGroup","actReqwestCourses"]),async createGroup(){await this.actCreateGroup({name:this.nameGroup,course_id:this.course})&&(this.dialog=!1,this.nameGroup="",this.course="")}},created(){this.actRequestGroups(),this.actReqwestCourses()}},N={class:"tw-flex tw-justify-between"},k=e.createElementVNode("div",null,"Группы",-1),G={style:{float:"right"}},b=e.createElementVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.59964 3.45737C3.80628 0.250428 8.08538 -0.94687 11.6901 0.811276C15.6603 2.74768 17.3091 7.53595 15.3727 11.5062C13.4363 15.4764 8.64798 17.1251 4.67776 15.1887C3.08138 14.4101 1.81733 13.1467 1.03718 11.5918C0.839085 11.197 0.998557 10.7163 1.39337 10.5182C1.78819 10.3201 2.26884 10.4796 2.46694 10.8744C3.09113 12.1184 4.10063 13.1275 5.379 13.751C8.55518 15.3001 12.3858 13.9811 13.9349 10.8049C15.484 7.62876 14.1651 3.79815 10.9889 2.24902C7.94449 0.764172 4.29884 1.91436 2.63736 4.80937H3.99909C4.44082 4.80937 4.79891 5.16746 4.79891 5.60918C4.79891 6.05091 4.44082 6.409 3.99909 6.409H0.799819C0.358091 6.409 0 6.05091 0 5.60918V2.40991C0 1.96818 0.358091 1.61009 0.799819 1.61009C1.24155 1.61009 1.59964 1.96818 1.59964 2.40991V3.45737Z",fill:"#B0BACD"},null,-1),y=[b],B={class:"tw-w-full tw-flex tw-justify-between"},E=e.createElementVNode("h6",null," Создание группы",-1);function S(s,o,I,q,l,r){const c=e.resolveComponent("v-select"),n=e.resolveComponent("v-btn"),i=e.resolveComponent("v-card-title"),u=e.resolveComponent("v-chip"),a=e.resolveComponent("v-icon"),m=e.resolveComponent("v-data-table"),d=e.resolveComponent("v-card"),p=e.resolveComponent("v-text-field"),C=e.resolveComponent("v-autocomplete"),v=e.resolveComponent("v-card-text"),_=e.resolveComponent("v-dialog");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(d,null,{default:e.withCtx(()=>[e.createVNode(i,null,{default:e.withCtx(()=>[e.createElementVNode("div",N,[k,e.createElementVNode("div",null,[e.createVNode(c,{label:"Фильтр",class:"tw-w-max",items:l.filterItems,modelValue:l.filterItemSelected,"onUpdate:modelValue":o[0]||(o[0]=t=>l.filterItemSelected=t),"item-title":"title","item-value":"val",variant:"outlined",density:"compact"},null,8,["items","modelValue"])]),e.createVNode(n,{color:"primary",onClick:o[1]||(o[1]=t=>l.dialog=!0)},{default:e.withCtx(()=>[e.createTextVNode("Создать группу")]),_:1})])]),_:1}),s.courses.length?(e.openBlock(),e.createBlock(m,{key:0,headers:l.headers,items:r.groups||[],"items-per-page":"100",loading:s.load,"onClick:row":r.go},{"item.course":e.withCtx(({item:t})=>[e.createTextVNode(e.toDisplayString(s.courses.filter(f=>f.id===t.course_id)[0].name),1)]),"item.status":e.withCtx(({item:t})=>[e.createVNode(u,{color:t.status==="open"?"green":"grey"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.status),1)]),_:2},1032,["color"])]),"item.actions":e.withCtx(({item:t})=>[e.createVNode(a,{size:"small"},{default:e.withCtx(()=>[e.createTextVNode(" mdi-pencil ")]),_:1})]),"header.actions":e.withCtx(()=>[e.createElementVNode("div",G,[(e.openBlock(),e.createElementBlock("svg",{class:"tw-cursor-pointer",onClick:o[2]||(o[2]=e.withModifiers((...t)=>s.actRequestGroups&&s.actRequestGroups(...t),["stop"])),width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y))])]),_:1},8,["headers","items","loading","onClick:row"])):e.createCommentVNode("",!0)]),_:1}),e.createVNode(_,{modelValue:l.dialog,"onUpdate:modelValue":o[6]||(o[6]=t=>l.dialog=t),width:"500"},{default:e.withCtx(()=>[e.createVNode(d,null,{default:e.withCtx(()=>[e.createVNode(i,null,{default:e.withCtx(()=>[e.createElementVNode("div",B,[E,e.createVNode(a,{onClick:o[3]||(o[3]=t=>l.dialog=!1)},{default:e.withCtx(()=>[e.createTextVNode("mdi-close")]),_:1})]),e.createVNode(v,null,{default:e.withCtx(()=>[e.createVNode(p,{label:"Название группы",modelValue:l.nameGroup,"onUpdate:modelValue":o[4]||(o[4]=t=>l.nameGroup=t),autofocus:""},null,8,["modelValue"]),e.createVNode(C,{"item-title":"name","item-value":"id","hide-details":"",modelValue:l.course,"onUpdate:modelValue":o[5]||(o[5]=t=>l.course=t),clearable:"","persistent-clear":"",label:"Курс",items:s.courses},null,8,["modelValue","items"]),e.createVNode(n,{block:"",onClick:r.createGroup,disabled:!l.course||!l.nameGroup},{default:e.withCtx(()=>[e.createTextVNode("Создать группу ")]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const T=h(x,[["render",S]]);export{T as default};
