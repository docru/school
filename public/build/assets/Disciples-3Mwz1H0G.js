import{_ as k,m as f,a as V,v as e}from"./app-DAbPShih.js";import{I as g,L as x,C as y}from"./ICode-CTdCzd2N.js";import{I as N,a as b,b as B}from"./IMore-BKxOrrwj.js";const U={name:"Disciples",components:{IMore:N,IModeration:b,IVast:B,ICode:g,Loading:x,Code:y},data(){return{search:"",dialog:!1,phone:"",usersHeaders:[{title:"id",key:"id"},{title:"Вход",key:"entrance"},{title:"Имя",key:"name"},{title:"Псевдоним",key:"nicname"},{title:"Телефон",key:"phone"},{title:"link",sortable:!1,key:"link"},{title:"",align:"end",sortable:!1,key:"actions"}]}},methods:{create(){this.actUserCreate({phone:this.phone,role:"disciple"})},...f("users",["actReqwestUsers","actUserCreateLink"])},computed:{searchItems(){let o=this.getUsers;return this.search?(this.search&&(o=this.getUsers.filter(s=>s.phone.search(this.search)>-1)),o):this.getUsers},...V("users",["getUsers","getLoad"])},created(){this.actReqwestUsers({role:"disciple"})}},E={class:"tw-flex tw-flex-col md:tw-flex-row tw-gap-[15px] tw-mb-5 tw-justify-center"},I={class:"tw-w-full"},L={key:0},D={class:"tw-flex tw-flex-col md:tw-flex-row tw-justify-between"},M={class:"tw-w-full md:tw-w-1/3"},z={style:{float:"right"}},T=e.createElementVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.59964 3.45737C3.80628 0.250428 8.08538 -0.94687 11.6901 0.811276C15.6603 2.74768 17.3091 7.53595 15.3727 11.5062C13.4363 15.4764 8.64798 17.1251 4.67776 15.1887C3.08138 14.4101 1.81733 13.1467 1.03718 11.5918C0.839085 11.197 0.998557 10.7163 1.39337 10.5182C1.78819 10.3201 2.26884 10.4796 2.46694 10.8744C3.09113 12.1184 4.10063 13.1275 5.379 13.751C8.55518 15.3001 12.3858 13.9811 13.9349 10.8049C15.484 7.62876 14.1651 3.79815 10.9889 2.24902C7.94449 0.764172 4.29884 1.91436 2.63736 4.80937H3.99909C4.44082 4.80937 4.79891 5.16746 4.79891 5.60918C4.79891 6.05091 4.44082 6.409 3.99909 6.409H0.799819C0.358091 6.409 0 6.05091 0 5.60918V2.40991C0 1.96818 0.358091 1.61009 0.799819 1.61009C1.24155 1.61009 1.59964 1.96818 1.59964 2.40991V3.45737Z",fill:"#B0BACD"},null,-1),q=[T],H=["onClick"];function R(o,s,j,A,n,l){const c=e.resolveComponent("v-card-title"),r=e.resolveComponent("v-text-field"),d=e.resolveComponent("v-btn"),m=e.resolveComponent("v-divider"),i=e.resolveComponent("v-icon"),p=e.resolveComponent("v-skeleton-loader"),_=e.resolveComponent("Code"),C=e.resolveComponent("v-chip"),h=e.resolveComponent("v-data-table"),v=e.resolveComponent("v-card-text"),u=e.resolveComponent("v-card"),w=e.resolveComponent("Loading");return o.getUsers?(e.openBlock(),e.createBlock(u,{key:0},{default:e.withCtx(()=>[e.createVNode(c,null,{default:e.withCtx(()=>[e.createTextVNode(" Ученики ")]),_:1}),e.createVNode(v,null,{default:e.withCtx(()=>[e.createElementVNode("div",E,[e.createElementVNode("div",I,[e.createVNode(r,{label:"Введите телефон",type:"number",modelValue:n.phone,"onUpdate:modelValue":s[0]||(s[0]=t=>n.phone=t)},null,8,["modelValue"])]),e.createVNode(d,{class:"tw-mt-2",color:"primary",disabled:!n.phone,onClick:l.create},{default:e.withCtx(()=>[e.createTextVNode("Создать ученика")]),_:1},8,["disabled","onClick"])]),e.createVNode(m,{class:"tw-my-3",color:"blue"}),o.getUsers?(e.openBlock(),e.createElementBlock("div",L,[e.createElementVNode("div",D,[e.createElementVNode("div",M,[e.createVNode(r,{clearable:"",type:"number",label:"Поиск по номеру телефона",modelValue:n.search,"onUpdate:modelValue":s[1]||(s[1]=t=>n.search=t)},null,8,["modelValue"])])]),e.createVNode(h,{"onClick:row":s[3]||(s[3]=t=>n.dialog=!n.dialog),headers:n.usersHeaders,items:l.searchItems,loading:o.getLoad},{"item.actions":e.withCtx(({item:t})=>[e.createVNode(i,{class:"me-2",size:"small",onClick:e.withModifiers(a=>o.editItem(t),["stop"])},{default:e.withCtx(()=>[e.createTextVNode(" mdi-pencil ")]),_:2},1032,["onClick"]),e.createVNode(i,{size:"small",onClick:e.withModifiers(a=>o.deleteItem(t),["stop"])},{default:e.withCtx(()=>[e.createTextVNode(" mdi-delete ")]),_:2},1032,["onClick"])]),"header.actions":e.withCtx(()=>[e.createElementVNode("div",z,[(e.openBlock(),e.createElementBlock("svg",{class:"tw-cursor-pointer",onClick:s[2]||(s[2]=e.withModifiers((...t)=>o.actRequestDisciples&&o.actRequestDisciples(...t),["stop"])),width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},q))])]),loading:e.withCtx(()=>[e.createVNode(p,{type:"table-row@10"})]),"item.link":e.withCtx(({item:t})=>[t.entry_code?(e.openBlock(),e.createBlock(_,{key:0,code:t.entry_code},null,8,["code"])):(e.openBlock(),e.createElementBlock("div",{key:1,onClick:a=>o.actUserCreateLink({uid:t.id})}," сгенерить ключ",8,H))]),"item.entrance":e.withCtx(({item:t})=>[e.createVNode(C,{color:t.authorized_at?"green":"grey"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.authorized_at?t.authorized_at:"не заходил"),1)]),_:2},1032,["color"])]),_:1},8,["headers","items","loading"])])):e.createCommentVNode("",!0)]),_:1})]),_:1})):(e.openBlock(),e.createBlock(w,{key:1}))}const F=k(U,[["render",R]]);export{F as default};
